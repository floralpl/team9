<<<<<<< HEAD
import { Object } from '../object/index.mjs';
import { Never } from '../never/index.mjs';
=======
import { CreateType } from '../create/type.mjs';
import { Kind, Hint } from '../symbols/index.mjs';
import { Never } from '../never/index.mjs';
import { Number } from '../number/index.mjs';
import { Object } from '../object/index.mjs';
import { String } from '../string/index.mjs';
>>>>>>> dd36f794aec55329dba52bd59bdd29e0d232b50c
import { Union } from '../union/index.mjs';
import { IsTemplateLiteralFinite } from '../template-literal/index.mjs';
import { PatternStringExact, PatternNumberExact, PatternNeverExact } from '../patterns/index.mjs';
import { IndexPropertyKeys } from '../indexed/index.mjs';
<<<<<<< HEAD
import { Kind, Hint } from '../symbols/index.mjs';
import { CloneType } from '../clone/type.mjs';
=======
>>>>>>> dd36f794aec55329dba52bd59bdd29e0d232b50c
// ------------------------------------------------------------------
// ValueGuard
// ------------------------------------------------------------------
import { IsUndefined } from '../guard/value.mjs';
// ------------------------------------------------------------------
// TypeGuard
// ------------------------------------------------------------------
<<<<<<< HEAD
import { IsInteger, IsLiteral, IsAny, IsNever, IsNumber, IsString, IsRegExp, IsTemplateLiteral, IsUnion } from '../guard/kind.mjs';
=======
import { IsInteger, IsLiteral, IsAny, IsBoolean, IsNever, IsNumber, IsString, IsRegExp, IsTemplateLiteral, IsUnion } from '../guard/kind.mjs';
>>>>>>> dd36f794aec55329dba52bd59bdd29e0d232b50c
// ------------------------------------------------------------------
// RecordCreateFromPattern
// ------------------------------------------------------------------
// prettier-ignore
function RecordCreateFromPattern(pattern, T, options) {
<<<<<<< HEAD
    return {
        ...options,
        [Kind]: 'Record',
        type: 'object',
        patternProperties: { [pattern]: CloneType(T) }
    };
=======
    return CreateType({ [Kind]: 'Record', type: 'object', patternProperties: { [pattern]: T } }, options);
>>>>>>> dd36f794aec55329dba52bd59bdd29e0d232b50c
}
// ------------------------------------------------------------------
// RecordCreateFromKeys
// ------------------------------------------------------------------
// prettier-ignore
function RecordCreateFromKeys(K, T, options) {
<<<<<<< HEAD
    const Acc = {};
    for (const K2 of K)
        Acc[K2] = CloneType(T);
    return Object(Acc, { ...options, [Hint]: 'Record' });
=======
    const result = {};
    for (const K2 of K)
        result[K2] = T;
    return Object(result, { ...options, [Hint]: 'Record' });
>>>>>>> dd36f794aec55329dba52bd59bdd29e0d232b50c
}
// prettier-ignore
function FromTemplateLiteralKey(K, T, options) {
    return (IsTemplateLiteralFinite(K)
        ? RecordCreateFromKeys(IndexPropertyKeys(K), T, options)
        : RecordCreateFromPattern(K.pattern, T, options));
}
// prettier-ignore
<<<<<<< HEAD
function FromUnionKey(K, T, options) {
    return RecordCreateFromKeys(IndexPropertyKeys(Union(K)), T, options);
}
// prettier-ignore
function FromLiteralKey(K, T, options) {
    return RecordCreateFromKeys([K.toString()], T, options);
}
// prettier-ignore
function FromRegExpKey(K, T, options) {
    return RecordCreateFromPattern(K.source, T, options);
}
// prettier-ignore
function FromStringKey(K, T, options) {
    const pattern = IsUndefined(K.pattern) ? PatternStringExact : K.pattern;
    return RecordCreateFromPattern(pattern, T, options);
}
// prettier-ignore
function FromAnyKey(K, T, options) {
    return RecordCreateFromPattern(PatternStringExact, T, options);
}
// prettier-ignore
function FromNeverKey(K, T, options) {
    return RecordCreateFromPattern(PatternNeverExact, T, options);
}
// prettier-ignore
function FromIntegerKey(_, T, options) {
    return RecordCreateFromPattern(PatternNumberExact, T, options);
}
// prettier-ignore
function FromNumberKey(_, T, options) {
    return RecordCreateFromPattern(PatternNumberExact, T, options);
=======
function FromUnionKey(key, type, options) {
    return RecordCreateFromKeys(IndexPropertyKeys(Union(key)), type, options);
}
// prettier-ignore
function FromLiteralKey(key, type, options) {
    return RecordCreateFromKeys([key.toString()], type, options);
}
// prettier-ignore
function FromRegExpKey(key, type, options) {
    return RecordCreateFromPattern(key.source, type, options);
}
// prettier-ignore
function FromStringKey(key, type, options) {
    const pattern = IsUndefined(key.pattern) ? PatternStringExact : key.pattern;
    return RecordCreateFromPattern(pattern, type, options);
}
// prettier-ignore
function FromAnyKey(_, type, options) {
    return RecordCreateFromPattern(PatternStringExact, type, options);
}
// prettier-ignore
function FromNeverKey(_key, type, options) {
    return RecordCreateFromPattern(PatternNeverExact, type, options);
}
// prettier-ignore
function FromBooleanKey(_key, type, options) {
    return Object({ true: type, false: type }, options);
}
// prettier-ignore
function FromIntegerKey(_key, type, options) {
    return RecordCreateFromPattern(PatternNumberExact, type, options);
}
// prettier-ignore
function FromNumberKey(_, type, options) {
    return RecordCreateFromPattern(PatternNumberExact, type, options);
>>>>>>> dd36f794aec55329dba52bd59bdd29e0d232b50c
}
// ------------------------------------------------------------------
// TRecordOrObject
// ------------------------------------------------------------------
/** `[Json]` Creates a Record type */
<<<<<<< HEAD
export function Record(K, T, options = {}) {
    // prettier-ignore
    return (IsUnion(K) ? FromUnionKey(K.anyOf, T, options) :
        IsTemplateLiteral(K) ? FromTemplateLiteralKey(K, T, options) :
            IsLiteral(K) ? FromLiteralKey(K.const, T, options) :
                IsInteger(K) ? FromIntegerKey(K, T, options) :
                    IsNumber(K) ? FromNumberKey(K, T, options) :
                        IsRegExp(K) ? FromRegExpKey(K, T, options) :
                            IsString(K) ? FromStringKey(K, T, options) :
                                IsAny(K) ? FromAnyKey(K, T, options) :
                                    IsNever(K) ? FromNeverKey(K, T, options) :
                                        Never(options));
=======
export function Record(key, type, options = {}) {
    // prettier-ignore
    return (IsUnion(key) ? FromUnionKey(key.anyOf, type, options) :
        IsTemplateLiteral(key) ? FromTemplateLiteralKey(key, type, options) :
            IsLiteral(key) ? FromLiteralKey(key.const, type, options) :
                IsBoolean(key) ? FromBooleanKey(key, type, options) :
                    IsInteger(key) ? FromIntegerKey(key, type, options) :
                        IsNumber(key) ? FromNumberKey(key, type, options) :
                            IsRegExp(key) ? FromRegExpKey(key, type, options) :
                                IsString(key) ? FromStringKey(key, type, options) :
                                    IsAny(key) ? FromAnyKey(key, type, options) :
                                        IsNever(key) ? FromNeverKey(key, type, options) :
                                            Never(options));
}
// ------------------------------------------------------------------
// Record Utilities
// ------------------------------------------------------------------
/** Gets the Records Pattern */
export function RecordPattern(record) {
    return globalThis.Object.getOwnPropertyNames(record.patternProperties)[0];
}
/** Gets the Records Key Type */
// prettier-ignore
export function RecordKey(type) {
    const pattern = RecordPattern(type);
    return (pattern === PatternStringExact ? String() :
        pattern === PatternNumberExact ? Number() :
            String({ pattern }));
}
/** Gets a Record Value Type */
// prettier-ignore
export function RecordValue(type) {
    return type.patternProperties[RecordPattern(type)];
>>>>>>> dd36f794aec55329dba52bd59bdd29e0d232b50c
}
